import{v as y,d as C}from"./el-loading-d02cbec6.js";import{E as k}from"./el-select-995b2b28.js";import{a as w}from"./api-0b26dce1.js";import{d as D,r as o,m as $,s as M,o as S,c as n,w as Y,f as l,F as h,e as j,b as r,q as x,j as c,t as m}from"./index-34d5dc7d.js";const B={class:"list"},E={class:"text-[#cdcccc] mr-5"},I=["onClick"],L={class:"date"},P={class:"clear-both overflow-hidden py-2"},T=D({__name:"Project",setup(V){const p=o([]),i=o(1),_=o(1),s=o([]),v=$(),u=o(!1),g=async()=>{u.value=!0;const e=s.value.find(d=>`/${d.typeUrl}`===v.path),a=await w({parentName:"博客文章",categoryName:e.name,page:i.value,limit:10});p.value=a.list,i.value=Number(a.currentPage),_.value=Number(a.totalItems),u.value=!1};M(s,(e,a)=>{console.log("watch 已触发",e)});const f=setInterval(()=>{localStorage.menu&&(s.value=JSON.parse(localStorage.menu),s.value.length>0&&(g(),clearInterval(f)))},200);S(()=>{});const N=e=>{console.log(`当前页: ${e}`),i.value=e,g()};return(e,a)=>{const d=k,b=y;return c(),n(h,null,[Y((c(),n("ul",B,[(c(!0),n(h,null,j(l(p),t=>(c(),n("li",{key:t._id},[r("b",E,"No."+m(t.serialNumber),1),r("h3",{onClick:F=>e.$router.push(`./detail/${t._id}`)},m(t.title),9,I),r("div",L,m(t.date&&l(C)(t.date).format("YYYY-MM-DD")),1)]))),128))])),[[b,l(u)]]),r("div",P,[x(d,{class:"float-right",background:"",layout:"prev, pager, next",onCurrentChange:N,total:l(_)},null,8,["total"])])],64)}}});export{T as default};
