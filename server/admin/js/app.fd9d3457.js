(function(t){function e(e){for(var a,o,r=e[0],n=e[1],c=e[2],m=0,u=[];m<r.length;m++)o=r[m],Object.prototype.hasOwnProperty.call(l,o)&&l[o]&&u.push(l[o][0]),l[o]=0;for(a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a]);d&&d(e);while(u.length)u.shift()();return i.push.apply(i,c||[]),s()}function s(){for(var t,e=0;e<i.length;e++){for(var s=i[e],a=!0,r=1;r<s.length;r++){var n=s[r];0!==l[n]&&(a=!1)}a&&(i.splice(e--,1),t=o(o.s=s[0]))}return t}var a={},l={app:0},i=[];function o(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=a,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(s,a,function(e){return t[e]}.bind(null,a));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/admin/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],n=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var d=n;i.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"0189":function(t,e,s){},"0b9f":function(t,e,s){"use strict";s("bd52")},"2ef8":function(t,e,s){"use strict";s("68a5")},"3fb5":function(t,e,s){"use strict";s("acc2")},4678:function(t,e,s){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-ps":"4c98","./ar-ps.js":"4c98","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku-kmr":"7558","./ku-kmr.js":"7558","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function l(t){var e=i(t);return s(e)}function i(t){if(!s.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}l.keys=function(){return Object.keys(a)},l.resolve=i,t.exports=l,l.id="4678"},"487e":function(t,e,s){"use strict";s("982c")},"4fde":function(t,e,s){},"56c8":function(t,e,s){"use strict";s("bfdf")},"56d7":function(t,e,s){"use strict";s.r(e);var a=s("2b0e"),l=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},i=[],o=(s("6727"),s("2877")),r={},n=Object(o["a"])(r,l,i,!1,null,null,null),c=n.exports,d=s("5c96"),m=s.n(d);s("0fae");a["default"].use(m.a);var u=s("8c4f"),p=function(){var t=this,e=t._self._c;return e("el-container",{staticStyle:{border:"1px solid #eee",height:"100vh"}},[e("el-aside",{staticStyle:{"background-color":"rgb(238, 241, 246)"},attrs:{width:"200px"}},[e("el-menu",{attrs:{router:"","unique-opened":"","default-active":t.$route.path}},[e("el-submenu",{attrs:{index:"1"}},[e("template",{slot:"title"},[e("i",{staticClass:"el-icon-message"}),t._v("内容管理")]),e("el-menu-item-group",[e("template",{slot:"title"},[e("h3",{staticClass:"subtitle"},[t._v("人物")])]),e("el-menu-item",{attrs:{index:"/items/create"}},[t._v("新建人物")]),e("el-menu-item",{attrs:{index:"/items/list"}},[t._v("人物列表")])],2),e("el-menu-item-group",[e("template",{slot:"title"},[e("h3",{staticClass:"subtitle"},[t._v("专题")])]),e("el-menu-item",{attrs:{index:"/heroes/create"}},[t._v("新建专题")]),e("el-menu-item",{attrs:{index:"/heroes/list"}},[t._v("专题列表")])],2),e("el-menu-item-group",[e("template",{slot:"title"},[e("h3",{staticClass:"subtitle"},[t._v("文章")])]),e("el-menu-item",{attrs:{index:"/articles/create"}},[t._v("新建文章")]),e("el-menu-item",{attrs:{index:"/articles/list"}},[t._v("文章列表")])],2)],2),e("el-submenu",{attrs:{index:"2"}},[e("template",{slot:"title"},[e("i",{staticClass:"el-icon-date"}),t._v("运营管理")]),e("el-menu-item-group",[e("template",{slot:"title"},[e("h3",{staticClass:"subtitle"},[t._v("广告位")])]),e("el-menu-item",{attrs:{index:"/ads/create"}},[t._v("新建广告位")]),e("el-menu-item",{attrs:{index:"/ads/list"}},[t._v("广告位列表")])],2)],2),e("el-submenu",{attrs:{index:"3"}},[e("template",{slot:"title"},[e("i",{staticClass:"el-icon-setting"}),t._v("系统设置")]),e("el-menu-item-group",[e("template",{slot:"title"},[e("h3",{staticClass:"subtitle"},[t._v("分类")])]),e("el-menu-item",{attrs:{index:"/Categories/create"}},[t._v("新建分类")]),e("el-menu-item",{attrs:{index:"/Categories/list"}},[t._v("分类列表")])],2),e("el-menu-item-group",[e("template",{slot:"title"},[e("h3",{staticClass:"subtitle"},[t._v("管理员")])]),e("el-menu-item",{attrs:{index:"/admin_users/create"}},[t._v("新建管理员")]),e("el-menu-item",{attrs:{index:"/admin_users/list"}},[t._v("管理员列表")]),e("el-menu-item",{attrs:{index:"/fontsManage"}},[t._v("字体管理")]),e("el-menu-item",{attrs:{index:"/siteManage"}},[t._v("站点管理")])],2)],2)],1)],1),e("el-container",[e("el-header",{staticStyle:{"text-align":"right","font-size":"12px"}},[e("el-dropdown",[e("i",{staticClass:"el-icon-setting",staticStyle:{"margin-right":"15px"}}),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",[e("span",{on:{click:t.logout}},[t._v("退出")])])],1)],1),e("span",[t._v(t._s(t.username))])],1),e("el-main",[e("router-view",{key:t.$route.path}),"/"===t.$route.path?[t._v(" 你好！欢迎来到管理端！ ")]:t._e()],2)],1)],1)},h=[],f=(s("14d9"),{data(){return{}},computed:{username(){return localStorage.username}},methods:{logout(){console.log(1),localStorage.clear(),this.$router.push({path:"/login"})}}}),b=f,g=(s("2ef8"),s("56c8"),Object(o["a"])(b,p,h,!1,null,"7a473695",null)),v=g.exports,y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"login"},[e("div",{staticClass:"bg stripes checkered"}),e("el-card",{staticClass:"login-class",attrs:{header:"登录"}},[e("el-form",{nativeOn:{submit:function(e){return e.preventDefault(),t.login.apply(null,arguments)}}},[e("el-form-item",{attrs:{label:"用户名"}},[e("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),e("el-form-item",{attrs:{label:"密码"}},[e("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary","native-type":"submit"}},[t._v("登录")])],1)],1)],1)],1)},w=[],x={name:"Home",components:{},data(){return{username:"",password:""}},methods:{async login(){const t=await this.$http.post("login",{username:this.username,password:this.password});200===t.status&&(localStorage.token=t.data.token,localStorage.username=this.username,this.$router.push("/"),this.$message({type:"success",message:"登录成功"})),console.log(t)}}},_=x,j=(s("0b9f"),Object(o["a"])(_,y,w,!1,null,"7685a6de",null)),$=j.exports,k=function(){var t=this,e=t._self._c;return e("div",{staticClass:"categoiesEdit"},[e("h1",{staticClass:"mainTitle"},[t._v(t._s(t.id?"编辑":"新建")+"分类")]),e("el-form",{attrs:{"label-width":"120px"},nativeOn:{submit:function(e){return e.preventDefault(),t.save.apply(null,arguments)}}},[e("el-form-item",{attrs:{label:"上级分类"}},[e("el-select",{model:{value:t.model.parent,callback:function(e){t.$set(t.model,"parent",e)},expression:"model.parent"}},t._l(t.parents,(function(t){return e("el-option",{key:t._id,attrs:{value:t._id,label:t.name}})})),1)],1),e("el-form-item",{attrs:{label:"名称"}},[e("el-input",{model:{value:t.model.name,callback:function(e){t.$set(t.model,"name",e)},expression:"model.name"}})],1),e("el-form-item",{attrs:{label:"页面name"}},[e("el-input",{model:{value:t.model.pageName,callback:function(e){t.$set(t.model,"pageName",e)},expression:"model.pageName"}})],1),e("el-form-item",{attrs:{label:"单页Id"}},[e("el-input",{model:{value:t.model.pageId,callback:function(e){t.$set(t.model,"pageId",e)},expression:"model.pageId"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary","native-type":"submit"}},[t._v("保存")])],1)],1)],1)},S=[],C={props:{id:{}},data(){return{model:{},parents:[]}},created(){this.fetchParents(),this.id&&this.fetch()},methods:{async save(){let t;t=this.id?await this.$http.put("rest/categories/"+this.id,this.model):await this.$http.post("rest/categories",this.model),this.$router.push("/categories/list"),this.$message({type:"success",message:"保存成功"})},async fetch(){const t=await this.$http.get("rest/categories/"+this.id);this.model=Object.assign({},this.model,t.data)},async fetchParents(){const t=await this.$http.get("rest/categories");this.parents=Object.assign({},this.model,t.data)}}},T=C,O=Object(o["a"])(T,k,S,!1,null,null,null),z=O.exports,D=function(){var t=this,e=t._self._c;return e("div",[e("H1",{staticClass:"mainTitle"},[t._v("分类列表")]),e("el-table",{attrs:{data:t.items}},[e("el-table-column",{attrs:{prop:"_id",label:"ID",width:"220"}}),e("el-table-column",{attrs:{prop:"parent.name",label:"上级分类"}}),e("el-table-column",{attrs:{prop:"name",label:"分类名称"}}),e("el-table-column",{attrs:{label:"操作",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.$router.push("/categories/edit/"+s.row._id)}}},[t._v("编辑")]),e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.handleDelete(s.row)}}},[t._v("删除")])]}}])})],1)],1)},P=[],I={data(){return{items:[]}},created(){this.fetch()},methods:{async fetch(){const t=await this.$http.get("rest/categories");this.items=t.data},async handleDelete(t){this.$confirm(`是否确定删除分类“${t.name}”?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await this.$http.delete("rest/categories/"+t._id);this.$message({type:"success",message:"删除成功!"}),this.fetch()})}}},U=I,L=Object(o["a"])(U,D,P,!1,null,null,null),H=L.exports,M=function(){var t=this,e=t._self._c;return e("div",{staticClass:"categoiesEdit"},[e("h1",{staticClass:"mainTitle"},[t._v(t._s(t.id?"编辑":"新建")+"人物")]),e("el-form",{attrs:{"label-width":"120px"},nativeOn:{submit:function(e){return e.preventDefault(),t.save.apply(null,arguments)}}},[e("el-form-item",{attrs:{label:"名称"}},[e("el-input",{model:{value:t.model.name,callback:function(e){t.$set(t.model,"name",e)},expression:"model.name"}})],1),e("el-form-item",{attrs:{label:"图标"}},[e("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadUrl,headers:t.getAuthHeaders(),"show-file-list":!1,"on-success":t.afterUpload}},[t.model.icon?e("img",{staticClass:"avatar",attrs:{src:t.model.icon}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e("el-form-item",[e("el-button",{attrs:{type:"primary","native-type":"submit"}},[t._v("保存")])],1)],1)],1)},A=[],B={props:{id:{}},data(){return{model:{}}},created(){this.id&&this.fetch()},methods:{afterUpload(t){console.log(t),this.$set(this.model,"icon",t.url)},async save(){let t;t=this.id?await this.$http.put("rest/items/"+this.id,this.model):await this.$http.post("rest/items",this.model),this.$router.push("/items/list"),this.$message({type:"success",message:"保存成功"})},async fetch(){const t=await this.$http.get("rest/items/"+this.id);this.model=t.data}}},N=B,E=(s("abb7"),Object(o["a"])(N,M,A,!1,null,null,null)),R=E.exports,F=function(){var t=this,e=t._self._c;return e("div",[e("H1",{staticClass:"mainTitle"},[t._v("人物列表")]),e("el-table",{attrs:{data:t.items}},[e("el-table-column",{attrs:{prop:"_id",label:"ID",width:"220"}}),e("el-table-column",{attrs:{prop:"name",label:"人物名称"}}),e("el-table-column",{attrs:{prop:"icon",label:"图标"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("img",{staticStyle:{height:"3em"},attrs:{src:t.row.icon,alt:""}})]}}])}),e("el-table-column",{attrs:{label:"操作",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.$router.push("/items/edit/"+s.row._id)}}},[t._v("编辑")]),e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.handleDelete(s.row)}}},[t._v("删除")])]}}])})],1)],1)},q=[],W={data(){return{items:[]}},created(){this.fetch()},methods:{async fetch(){const t=await this.$http.get("rest/items");this.items=t.data},async handleDelete(t){this.$confirm(`是否确定删除分类“${t.name}”?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await this.$http.delete("rest/items/"+t._id);this.$message({type:"success",message:"删除成功!"}),this.fetch()})}}},Y=W,G=Object(o["a"])(Y,F,q,!1,null,null,null),J=G.exports,V=function(){var t=this,e=t._self._c;return e("div",{staticClass:"categoiesEdit"},[e("h1",{staticClass:"mainTitle"},[t._v(t._s(t.id?"编辑":"新建")+"专题")]),e("el-form",{staticStyle:{"margin-top":"30px"},attrs:{"label-width":"120px"},nativeOn:{submit:function(e){return e.preventDefault(),t.save.apply(null,arguments)}}},[e("el-tabs",{attrs:{value:"",type:"border-card"}},[e("el-tab-pane",{attrs:{label:"基础信息"}},[e("el-form-item",{attrs:{label:"名称"}},[e("el-input",{model:{value:t.model.name,callback:function(e){t.$set(t.model,"name",e)},expression:"model.name"}})],1),e("el-form-item",{attrs:{label:"称号"}},[e("el-input",{model:{value:t.model.title,callback:function(e){t.$set(t.model,"title",e)},expression:"model.title"}})],1),e("el-form-item",{attrs:{label:"类型"}},[e("el-select",{attrs:{multiple:""},model:{value:t.model.categories,callback:function(e){t.$set(t.model,"categories",e)},expression:"model.categories"}},t._l(t.categories,(function(t){return e("el-option",{key:t._id,attrs:{label:t.name,value:t._id}})})),1)],1),e("el-form-item",{attrs:{label:"难度"}},[e("el-rate",{staticStyle:{"margin-top":"10px"},attrs:{max:9,"show-score":""},model:{value:t.model.scores.diffcult,callback:function(e){t.$set(t.model.scores,"diffcult",e)},expression:"model.scores.diffcult"}})],1),e("el-form-item",{attrs:{label:"技能"}},[e("el-rate",{staticStyle:{"margin-top":"10px"},attrs:{max:9,"show-score":""},model:{value:t.model.scores.skills,callback:function(e){t.$set(t.model.scores,"skills",e)},expression:"model.scores.skills"}})],1),e("el-form-item",{attrs:{label:"攻击"}},[e("el-rate",{staticStyle:{"margin-top":"10px"},attrs:{max:9,"show-score":""},model:{value:t.model.scores.attack,callback:function(e){t.$set(t.model.scores,"attack",e)},expression:"model.scores.attack"}})],1),e("el-form-item",{attrs:{label:"生存"}},[e("el-rate",{staticStyle:{"margin-top":"10px"},attrs:{max:9,"show-score":""},model:{value:t.model.scores.survive,callback:function(e){t.$set(t.model.scores,"survive",e)},expression:"model.scores.survive"}})],1),e("el-form-item",{attrs:{label:"顺风出装"}},[e("el-select",{attrs:{multiple:""},model:{value:t.model.items1,callback:function(e){t.$set(t.model,"items1",e)},expression:"model.items1"}},t._l(t.items,(function(t){return e("el-option",{key:t._id,attrs:{label:t.name,value:t._id}})})),1)],1),e("el-form-item",{attrs:{label:"逆风出装"}},[e("el-select",{attrs:{multiple:""},model:{value:t.model.items2,callback:function(e){t.$set(t.model,"items2",e)},expression:"model.items2"}},t._l(t.items,(function(t){return e("el-option",{key:t._id,attrs:{label:t.name,value:t._id}})})),1)],1),e("el-form-item",{attrs:{label:"图标"}},[e("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.$http.defaults.baseURL+"/upload","show-file-list":!1,"on-success":t.afterUpload}},[t.model.avatar?e("img",{staticClass:"avatar",attrs:{src:t.model.avatar}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e("el-form-item",{attrs:{label:"使用技巧"}},[e("el-input",{attrs:{type:"textarea"},model:{value:t.model.usageTips,callback:function(e){t.$set(t.model,"usageTips",e)},expression:"model.usageTips"}})],1),e("el-form-item",{attrs:{label:"对抗技巧"}},[e("el-input",{attrs:{type:"textarea"},model:{value:t.model.battleTips,callback:function(e){t.$set(t.model,"battleTips",e)},expression:"model.battleTips"}})],1),e("el-form-item",{attrs:{label:"团战思路"}},[e("el-input",{attrs:{type:"textarea"},model:{value:t.model.teamTips,callback:function(e){t.$set(t.model,"teamTips",e)},expression:"model.teamTips"}})],1)],1),e("el-tab-pane",{attrs:{label:"技能",name:"skills"}},[e("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"ghost"},on:{click:t.addSkills}},[e("i",{staticClass:"el-icon-plus"}),t._v(" 添加技能")]),e("el-row",{staticStyle:{"flex-wrap":"wrap"},attrs:{type:"flex",gutter:20}},t._l(t.model.skills,(function(s,a){return e("el-col",{key:a,attrs:{span:12}},[e("el-card",{staticStyle:{"margin-bottom":"20px"},attrs:{shadow:"hover"}},[e("el-form-item",{attrs:{label:"技能"+(a+1)}}),e("el-form-item",{attrs:{label:"图标"}},[e("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.$http.defaults.baseURL+"/upload","show-file-list":!1,"on-success":e=>t.$set(s,"icon",e.url)}},[s.icon?e("img",{staticClass:"avatar",attrs:{src:s.icon}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e("el-form-item",{attrs:{label:"名称"}},[e("el-input",{model:{value:s.name,callback:function(e){t.$set(s,"name",e)},expression:"item.name"}})],1),e("el-form-item",{attrs:{label:"描述"}},[e("el-input",{attrs:{type:"textarea"},model:{value:s.description,callback:function(e){t.$set(s,"description",e)},expression:"item.description"}})],1),e("el-form-item",{attrs:{label:"小提示"}},[e("el-input",{attrs:{type:"textarea"},model:{value:s.tips,callback:function(e){t.$set(s,"tips",e)},expression:"item.tips"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(e){return t.model.skills.splice(a,1)}}},[t._v("删除")])],1)],1)],1)})),1)],1)],1),e("el-form-item",{staticStyle:{"margin-top":"30px"}},[e("el-button",{attrs:{type:"primary","native-type":"submit"}},[t._v("保存")])],1)],1)],1)},K=[],Q={props:{id:{}},data(){return{model:{name:"",avatar:"",scores:{},skills:[]},categories:[],items:[]}},created(){this.id&&this.fetch(),this.fetchCategories(),this.fetchItems()},methods:{addSkills(){this.model.skills.push({})},afterUpload(t){console.log(t),this.model.avatar=t.url},async save(){let t;t=this.id?await this.$http.put("rest/heroes/"+this.id,this.model):await this.$http.post("rest/heroes",this.model),this.$router.push("/heroes/list"),this.$message({type:"success",message:"保存成功"})},async fetch(){const t=await this.$http.get("rest/heroes/"+this.id);this.model=Object.assign({},this.model,t.data)},async fetchCategories(){const t=await this.$http.get("rest/categories");this.categories=t.data},async fetchItems(){const t=await this.$http.get("rest/items");this.items=t.data}}},X=Q,Z=(s("665b"),Object(o["a"])(X,V,K,!1,null,"ac083a5c",null)),tt=Z.exports,et=function(){var t=this,e=t._self._c;return e("div",[e("H1",{staticClass:"mainTitle"},[t._v("专题列表")]),e("el-table",{attrs:{data:t.items}},[e("el-table-column",{attrs:{prop:"_id",label:"ID",width:"220"}}),e("el-table-column",{attrs:{prop:"name",label:"专题名称"}}),e("el-table-column",{attrs:{prop:"title",label:"称号"}}),e("el-table-column",{attrs:{prop:"icon",label:"头像"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("img",{staticStyle:{height:"3em"},attrs:{src:t.row.avatar,alt:""}})]}}])}),e("el-table-column",{attrs:{label:"操作",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.$router.push("/heroes/edit/"+s.row._id)}}},[t._v("编辑")]),e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.handleDelete(s.row)}}},[t._v("删除")])]}}])})],1)],1)},st=[],at={data(){return{items:[]}},created(){this.fetch()},methods:{async fetch(){const t=await this.$http.get("rest/heroes");this.items=t.data},async handleDelete(t){this.$confirm(`是否确定删除分类“${t.name}”?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await this.$http.delete("rest/heroes/"+t._id);this.$message({type:"success",message:"删除成功!"}),this.fetch()})}}},lt=at,it=Object(o["a"])(lt,et,st,!1,null,null,null),ot=it.exports,rt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"about"},[e("h1",{staticClass:"mainTitle"},[t._v(t._s(t.id?"编辑":"新建")+"文章")]),e("el-form",{attrs:{"label-width":"120px"},nativeOn:{submit:function(e){return e.preventDefault(),t.save.apply(null,arguments)}}},[e("el-form-item",{attrs:{label:"所属分类"}},[e("el-select",{attrs:{multiple:""},model:{value:t.model.categories,callback:function(e){t.$set(t.model,"categories",e)},expression:"model.categories"}},t._l(t.categories,(function(t){return e("el-option",{key:t._id,attrs:{value:t._id,label:t.name}})})),1)],1),e("el-form-item",{staticStyle:{width:"73%"},attrs:{label:"标题"}},[e("el-input",{model:{value:t.model.title,callback:function(e){t.$set(t.model,"title",e)},expression:"model.title"}})],1),e("el-form-item",{attrs:{label:"创建时间"}},[e("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期"},model:{value:t.model.date,callback:function(e){t.$set(t.model,"date",e)},expression:"model.date"}}),e("el-switch",{staticStyle:{"margin-left":"20px"},model:{value:t.model.dateDisplay,callback:function(e){t.$set(t.model,"dateDisplay",e)},expression:"model.dateDisplay"}}),t._v(" 是否显示时间 ")],1),e("el-form-item",{staticStyle:{width:"340px"},attrs:{label:"作者"}},[e("el-input",{model:{value:t.model.author,callback:function(e){t.$set(t.model,"author",e)},expression:"model.author"}})],1),e("el-form-item",{attrs:{label:"立即发布"}},[e("el-switch",{model:{value:t.model.status,callback:function(e){t.$set(t.model,"status",e)},expression:"model.status"}})],1),e("el-form-item",{attrs:{label:"是否单页"}},[e("el-switch",{model:{value:t.model.single,callback:function(e){t.$set(t.model,"single",e)},expression:"model.single"}})],1),e("el-form-item",{attrs:{label:"功能性插件"}},[e("el-input",{staticStyle:{width:"220px","margin-right":"20px"},model:{value:t.model.slotName,callback:function(e){t.$set(t.model,"slotName",e)},expression:"model.slotName"}}),e("el-switch",{staticStyle:{"margin-left":"20px"},model:{value:t.model.slotStatus,callback:function(e){t.$set(t.model,"slotStatus",e)},expression:"model.slotStatus"}}),t._v(" 是否开启 ")],1),e("el-form-item",{attrs:{label:"摘要"}},[e("el-input",{staticStyle:{width:"72%","margin-right":"20px"},attrs:{type:"textarea",rows:6,placeholder:"请输入内容",maxlength:t.model.words,"show-word-limit":""},model:{value:t.model.summary,callback:function(e){t.$set(t.model,"summary",e)},expression:"model.summary"}})],1),e("el-form-item",[e("el-input",{staticStyle:{width:"40%","margin-right":"20px"},attrs:{type:"textarea",rows:2,placeholder:"提示语"},model:{value:t.model.prompt,callback:function(e){t.$set(t.model,"prompt",e)},expression:"model.prompt"}}),t._v(" 字数： "),e("el-input",{staticStyle:{width:"68px","margin-right":"20px"},attrs:{type:"text"},model:{value:t.model.words,callback:function(e){t.$set(t.model,"words",e)},expression:"model.words"}}),e("el-button",{attrs:{loading:t.gptStatus,type:"primary",plain:""},on:{click:t.getGPT}},[t._v("ChatGPT")]),e("div",{staticStyle:{color:"#999"}},[t._v(" 标准提示语——将以下内容精简成文本，字数不超过 ")])],1),e("el-form-item",{attrs:{label:"文章标签"}},[e("el-select",{staticStyle:{width:"72%"},attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择文章标签"},on:{change:t.handleTagsChange},model:{value:t.model.tags,callback:function(e){t.$set(t.model,"tags",e)},expression:"model.tags"}},t._l(t.tagsList,(function(s){return e("el-option",{key:s._id,attrs:{value:s._id,label:s.name}},[e("span",{staticStyle:{float:"left"}},[t._v(t._s(s.name))]),e("i",{staticClass:"el-icon-delete",staticStyle:{float:"right",margin:"10px 40px 0 0"},on:{click:function(e){return e.stopPropagation(),(()=>t.delTag(s._id)).apply(null,arguments)}}})])})),1)],1),e("el-form-item",{attrs:{label:"封面图片"}},[e("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadUrl,headers:t.getAuthHeaders(),"show-file-list":!1,"on-success":e=>t.$set(t.model,"coverImage",e.url)}},[t.model.coverImage?e("img",{staticClass:"avatar",attrs:{src:t.model.coverImage}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e("el-form-item",[e("el-button",{attrs:{type:"primary","native-type":"submit"}},[t._v("保存文章")])],1),e("el-form-item",{attrs:{label:"文章内容"}},[e("vue-editor",{attrs:{useCustomImageHandler:""},on:{"image-added":t.handleImageAdded},model:{value:t.model.body,callback:function(e){t.$set(t.model,"body",e)},expression:"model.body"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary","native-type":"submit"}},[t._v("保存文章")])],1)],1)],1)},nt=[],ct=(s("1e70"),s("79a4"),s("c1a1"),s("8b00"),s("a4e7"),s("1e5a"),s("72c3"),s("5873")),dt=s("c1df"),mt=s.n(dt),ut={props:{id:{}},components:{VueEditor:ct["a"]},data(){return{model:{status:!0,date:new Date,dateDisplay:!0,author:"",slotName:"",slotStatus:!1,summary:"",coverImage:"",words:400,prompt:"将以下内容精简成文本，字数不超过",tags:[]},tagsList:[],categories:[],gptStatus:!1}},created(){this.fetchCategories(),this.id&&this.fetch(),this.getTags()},methods:{async delTag(t){console.log(t);const e=this.tagsList.find(e=>e._id===t);await this.$http.delete("rest/tags/"+t);this.$message({type:"success",message:e.name+"删除成功"}),this.getTags()},async handleTagsChange(t){console.log("handleTagsChange",t);const e=new Set(this.tagsList.map(t=>t._id)),s=t.filter(t=>!e.has(t));if(console.log("TagsChange",s[0]),s[0]){const{data:t}=await this.$http.post("rest/tags",{name:s[0]});console.log("createTags",t),this.tagsList.push(t),this.model.tags.map(e=>{e===t.name&&(this.$set(this.model.tags,this.model.tags.indexOf(e),t._id),this.$forceUpdate())}),console.log("last=====================",this.model.tags)}},async getTags(){const{data:t}=await this.$http.get("rest/tags");console.log("getTags",t),this.tagsList=t},async save(){let t;this.model.body=this.processRichText(this.model.body),this.model.date=mt()(this.model.date).format("YYYY-MM-DD HH:mm:ss"),t=this.id?await this.$http.put("rest/articles/"+this.id,this.model):await this.$http.post("rest/articles",this.model),this.$router.push("/articles/list"),this.$message({type:"success",message:"保存成功"})},async fetch(){const t=await this.$http.get("rest/articles/"+this.id);this.model=Object.assign({},this.model,t.data)},async fetchCategories(){const t=await this.$http.get("rest/categories");this.categories=t.data},async handleImageAdded(t,e,s,a){const l=new FormData;l.append("file",t);const i=await this.$http.post("upload",l);e.insertEmbed(s,"image",i.data.url),a()},convertRichTextToPlainText(t){var e=document.createElement("div");return e.innerHTML=t,e.textContent||e.innerText||""},async getGPT(){this.gptStatus=!0;const t=this.convertRichTextToPlainText(this.model.body),e=await this.$http.post(`rest/articles/${this.id}/summary`,{prompt:`${this.model.prompt}${this.model.words}—— \n`,summaryText:`${this.model.title}——${t}`});this.model.summary=JSON.parse(e.data).result,this.gptStatus=!1},processRichText(t){const e=new DOMParser,s=e.parseFromString(t,"text/html"),a=s.querySelectorAll("pre");return a.forEach(t=>{if(!t.querySelector("code")){const e=document.createElement("code");e.className="language-js line-numbers",e.innerHTML=t.innerHTML,t.innerHTML="",t.appendChild(e)}}),s.body.innerHTML}}},pt=ut,ht=(s("487e"),Object(o["a"])(pt,rt,nt,!1,null,null,null)),ft=ht.exports,bt=function(){var t=this,e=t._self._c;return e("div",[e("H1",{staticClass:"mainTitle"},[t._v("文章列表")]),e("el-table",{attrs:{data:t.items}},[e("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e("el-table-column",{attrs:{prop:"_id",label:"ID",width:"220"}}),e("el-table-column",{attrs:{prop:"title",label:"标题"}}),e("el-table-column",{attrs:{prop:"parentName",label:"所属分类"}}),e("el-table-column",{attrs:{prop:"date",label:"创建时间"}}),e("el-table-column",{attrs:{prop:"status",label:"是否发布"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("el-switch",{attrs:{disabled:""},on:{change:e=>t.handleStatus(s.row._id,e)},model:{value:s.row.status,callback:function(e){t.$set(s.row,"status",e)},expression:"scope.row.status"}})]}}])}),e("el-table-column",{attrs:{label:"操作",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.$router.push("/articles/edit/"+s.row._id)}}},[t._v("编辑")]),e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.handleDelete(s.row)}}},[t._v("删除")])]}}])})],1),e("div",{staticStyle:{padding:"20px",display:"flex","align-items":"center","justify-content":"center"}},[e("el-pagination",{attrs:{background:"","current-page":t.currentPage,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},gt=[],vt={data(){return{items:[],categoriesList:[],total:1,currentPage:1,limitPage:10}},computed:{},created(){this.currentPage=Number(sessionStorage.getItem("exceptPage")),this.fetchCategories()},methods:{async fetchCategories(){const t=await this.$http.get("rest/categories");this.categoriesList=t.data,this.fetch()},async fetch(){const t=await this.$http.post("rest/articles/list",{page:this.currentPage,limit:this.limitPage});this.items=t.data.list,this.items.map(t=>{const e=t.categories.map(t=>{const e=this.categoriesList.find(e=>e._id===t);return e&&e.name||""});t.parentName=e.join()}),this.total=t.data.totalItems},async handleDelete(t){this.$confirm(`是否确定删除文章“${t.title}”?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await this.$http.delete("rest/articles/"+t._id);this.$message({type:"success",message:"删除成功!"}),this.fetch()})},handleStatus(t,e){console.log(t,e)},handleCurrentChange(t){console.log("当前页: "+t),this.currentPage=t,sessionStorage.setItem("exceptPage",t),this.fetch()},handleSizeChange(t){console.log(`每页 ${t} 条`),this.limitPage=t,this.fetch()}}},yt=vt,wt=Object(o["a"])(yt,bt,gt,!1,null,null,null),xt=wt.exports,_t=function(){var t=this,e=t._self._c;return e("div",{staticClass:"categoiesEdit"},[e("h1",{staticClass:"mainTitle"},[t._v(t._s(t.id?"编辑":"新建")+"广告位")]),e("el-form",{attrs:{"label-width":"120px"},nativeOn:{submit:function(e){return e.preventDefault(),t.save.apply(null,arguments)}}},[e("el-form-item",{attrs:{label:"名称"}},[e("el-input",{model:{value:t.model.name,callback:function(e){t.$set(t.model,"name",e)},expression:"model.name"}})],1),e("el-row",{staticStyle:{"flex-wrap":"wrap"},attrs:{type:"flex",gutter:20}},t._l(t.model.items,(function(s,a){return e("el-col",{key:a,attrs:{span:24}},[e("el-card",{staticStyle:{"margin-bottom":"20px"},attrs:{shadow:"hover"}},[e("el-form-item",{staticClass:"clearfix"},[e("b",[t._v("广告"+t._s(a+1))]),e("el-button",{staticStyle:{float:"right"},attrs:{type:"danger",size:"small"},on:{click:function(e){return t.model.items.splice(a,1)}}},[t._v("删除")])],1),e("el-form-item",{attrs:{label:"标题"}},[e("el-input",{model:{value:s.title,callback:function(e){t.$set(s,"title",e)},expression:"item.title"}})],1),e("el-form-item",{attrs:{label:"跳转链接URL"}},[e("el-input",{model:{value:s.url,callback:function(e){t.$set(s,"url",e)},expression:"item.url"}})],1),e("el-form-item",{attrs:{label:"打开新窗口"}},[e("el-switch",{model:{value:s.target,callback:function(e){t.$set(s,"target",e)},expression:"item.target"}})],1),e("el-form-item",{attrs:{label:"图片"}},[e("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadUrl,headers:t.getAuthHeaders(),"show-file-list":!1,"on-success":e=>t.$set(s,"image",e.url)}},[s.image?e("img",{staticClass:"avatar",attrs:{src:s.image}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1)})),1),e("el-form-item",[e("el-button",{attrs:{type:"ghost"},on:{click:function(e){return t.model.items.push({})}}},[e("i",{staticClass:"el-icon-plus"}),t._v(" 新增一条")]),e("el-button",{attrs:{type:"primary","native-type":"submit"}},[t._v("保存")])],1)],1)],1)},jt=[],$t={props:{id:{}},data(){return{model:{items:[]}}},created(){this.id&&this.fetch()},methods:{async save(){let t;t=this.id?await this.$http.put("rest/ads/"+this.id,this.model):await this.$http.post("rest/ads",this.model),this.$router.push("/ads/list"),this.$message({type:"success",message:"保存成功"})},async fetch(){const t=await this.$http.get("rest/ads/"+this.id);this.model=Object.assign({},this.model,t.data)}}},kt=$t,St=(s("3fb5"),Object(o["a"])(kt,_t,jt,!1,null,null,null)),Ct=St.exports,Tt=function(){var t=this,e=t._self._c;return e("div",[e("h1",{staticClass:"mainTitle"},[t._v("广告位列表")]),e("el-table",{attrs:{data:t.items}},[e("el-table-column",{attrs:{prop:"_id",label:"ID",width:"220"}}),e("el-table-column",{attrs:{prop:"name",label:"名称"}}),e("el-table-column",{attrs:{label:"操作",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.$router.push("/ads/edit/"+s.row._id)}}},[t._v("编辑")]),e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.handleDelete(s.row)}}},[t._v("删除")])]}}])})],1)],1)},Ot=[],zt={data(){return{items:[]}},created(){this.fetch()},methods:{async fetch(){const t=await this.$http.get("rest/ads");this.items=t.data},async handleDelete(t){this.$confirm(`是否确定删除“${t.name}”?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await this.$http.delete("rest/ads/"+t._id);this.$message({type:"success",message:"删除成功!"}),this.fetch()})}}},Dt=zt,Pt=Object(o["a"])(Dt,Tt,Ot,!1,null,null,null),It=Pt.exports,Ut=function(){var t=this,e=t._self._c;return e("div",{staticClass:"categoiesEdit"},[e("h1",{staticClass:"mainTitle"},[t._v(t._s(t.id?"编辑":"新建")+"管理员")]),e("el-form",{attrs:{"label-width":"120px"},nativeOn:{submit:function(e){return e.preventDefault(),t.save.apply(null,arguments)}}},[e("el-form-item",{attrs:{label:"用户名"}},[e("el-input",{model:{value:t.model.username,callback:function(e){t.$set(t.model,"username",e)},expression:"model.username"}})],1),e("el-form-item",{attrs:{label:"密码"}},[e("el-input",{attrs:{type:"text"},model:{value:t.model.password,callback:function(e){t.$set(t.model,"password",e)},expression:"model.password"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary","native-type":"submit"}},[t._v("保存")])],1)],1)],1)},Lt=[],Ht={props:{id:{}},data(){return{model:{}}},created(){this.id&&this.fetch()},methods:{async save(){let t;t=this.id?await this.$http.put("rest/admin_users/"+this.id,this.model):await this.$http.post("rest/admin_users",this.model),this.$router.push("/admin_users/list"),this.$message({type:"success",message:"保存成功"})},async fetch(){const t=await this.$http.get("rest/admin_users/"+this.id);this.model=t.data}}},Mt=Ht,At=Object(o["a"])(Mt,Ut,Lt,!1,null,null,null),Bt=At.exports,Nt=function(){var t=this,e=t._self._c;return e("div",[e("H1",{staticClass:"mainTitle"},[t._v("管理员列表")]),e("el-table",{attrs:{data:t.items}},[e("el-table-column",{attrs:{prop:"_id",label:"ID",width:"220"}}),e("el-table-column",{attrs:{prop:"username",label:"用户名"}}),e("el-table-column",{attrs:{prop:"password",label:"密码"}}),e("el-table-column",{attrs:{label:"操作",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.$router.push("/admin_users/edit/"+s.row._id)}}},[t._v("编辑")]),e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.handleDelete(s.row)}}},[t._v("删除")])]}}])})],1)],1)},Et=[],Rt={data(){return{items:[]}},created(){this.fetch()},methods:{async fetch(){const t=await this.$http.get("rest/admin_users");this.items=t.data},async handleDelete(t){this.$confirm(`是否确定删除“${t.username}”?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await this.$http.delete("rest/admin_users/"+t._id);this.$message({type:"success",message:"删除成功!"}),this.fetch()})}}},Ft=Rt,qt=Object(o["a"])(Ft,Nt,Et,!1,null,null,null),Wt=qt.exports,Yt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"about"},[e("h1",{staticClass:"mainTitle"},[t._v("Web全站字体包管理")]),e("el-form",{attrs:{"label-width":"120px"}},[e("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"字体包文件"}},[e("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:this.$http.defaults.baseURL+"/uploadFonts",headers:t.getAuthHeaders(),"on-success":t.afterUpload,multiple:!1,limit:1}},[e("i",{staticClass:"el-icon-upload"}),e("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),e("em",[t._v("点击上传")])]),e("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(" 只能上传.ttf格式字体包,且只能传一个字体包,默认是"),e("a",{attrs:{href:"https://hkroom.oss-cn-shenzhen.aliyuncs.com/TencentSansW7.ttf"}},[t._v("腾讯体")])])])],1),e("el-form-item",{attrs:{label:"打包文字"}},[e("el-input",{staticStyle:{width:"60%"},attrs:{type:"textarea",rows:10,placeholder:"请输入所需要提取的文字"},model:{value:t.words,callback:function(e){t.words=e},expression:"words"}}),e("div",{staticStyle:{color:"#999"}},[t._v(" 全站提取目前只提取导航菜单、文章标题、logo文字、slogan、welcome ")])],1),e("el-form-item",{attrs:{label:"补充文字"}},[e("el-input",{staticStyle:{width:"60%"},attrs:{type:"textarea",rows:5,placeholder:"请输入所需要提取的文字"},model:{value:t.addwords,callback:function(e){t.addwords=e},expression:"addwords"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary",loading:t.fontStatus,plain:""},on:{click:t.getWords}},[t._v("全站文本提取")]),e("el-button",{attrs:{type:"primary",loading:t.tranStatus},on:{click:t.createFonts}},[t._v("生成并部署字体包")])],1)],1)],1)},Gt=[],Jt={data(){return{words:"",fontStatus:!1,tranStatus:!1,fileList:[],current:1,addwords:"0123456789.阅读全文 〈〉><《》Nno-返回顶部↑←文章标签集合发布于日期作者："}},created(){},methods:{async getWords(){let t;this.fontStatus=!0,t=await this.$http.get("rest/sites/webInfo");const{slogan:e,title:s,welcome:a}=t.data;this.words=e+s+a+this.addwords,t=await this.$http.get("rest/categories");const l=t.data.map(t=>t.name).join("");this.words+=l,t=await this.$http.get("rest/ads/65822a1d8e37fce318f113a4");const i=t.data.items.map(t=>t.title).join("");this.words+=i,t=await this.$http.get("rest/tags"),console.log("res",t);const o=t.data.map(t=>t.name).join("");console.log("tagsList",o),this.words+=o,this.fetchArticle()},removeDuplicateCharacters(t){const e=new Set(t.split(""));return Array.from(e).join("")},afterUpload(t){console.log(t)},async createFonts(){this.tranStatus=!0;await this.$http.post("rest/sites/webFonts",{words:this.words});this.tranStatus=!1},async fetchArticle(t=1){const e=await this.$http.post("rest/articles/list",{page:t,limit:10});console.log(e.data),this.words+=e.data.list.map(t=>t.title).join(""),t<e.data.totalPages?this.fetchArticle(t+1):this.fontStatus=!1}}},Vt=Jt,Kt=Object(o["a"])(Vt,Yt,Gt,!1,null,null,null),Qt=Kt.exports,Xt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"categoiesEdit"},[e("h1",{staticClass:"mainTitle"},[t._v("全站配置")]),e("el-form",{attrs:{"label-width":"120px"},nativeOn:{submit:function(e){return e.preventDefault(),t.save.apply(null,arguments)}}},[e("el-form-item",{attrs:{label:"网站名称"}},[e("el-input",{staticStyle:{width:"300px"},model:{value:t.model.title,callback:function(e){t.$set(t.model,"title",e)},expression:"model.title"}})],1),e("el-form-item",{attrs:{label:"slogan"}},[e("el-input",{staticStyle:{width:"380px"},model:{value:t.model.slogan,callback:function(e){t.$set(t.model,"slogan",e)},expression:"model.slogan"}})],1),e("el-row",[e("el-col",{attrs:{span:7}},[e("el-form-item",{attrs:{label:"站点名称ico图标"}},[e("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadUrl,headers:t.getAuthHeaders(),"show-file-list":!1,"on-success":t.afterIconUpload}},[t.model.icon?e("img",{staticClass:"avatar",attrs:{src:t.model.icon}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"背景图"}},[e("el-upload",{staticClass:"avatar-uploader banner",attrs:{action:t.uploadUrl,headers:t.getAuthHeaders(),"show-file-list":!1,"on-success":t.afterBannerUpload}},[t.model.banner?e("img",{staticClass:"avatar",attrs:{src:t.model.banner}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1),e("el-form-item",{attrs:{label:"Welcome"}},[e("el-input",{staticStyle:{width:"450px"},model:{value:t.model.welcome,callback:function(e){t.$set(t.model,"welcome",e)},expression:"model.welcome"}})],1),e("el-form-item",{staticStyle:{width:"450px"},attrs:{label:"CoryRight"}},[e("el-input",{model:{value:t.model.coryright,callback:function(e){t.$set(t.model,"coryright",e)},expression:"model.coryright"}})],1),e("el-form-item",{staticStyle:{width:"450px"},attrs:{label:"备案号"}},[e("el-input",{model:{value:t.model.beian,callback:function(e){t.$set(t.model,"beian",e)},expression:"model.beian"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary","native-type":"submit"}},[t._v("保存站点信息")])],1)],1)],1)},Zt=[],te={data(){return{model:{title:"",slogen:"",summary:"",icon:"",banner:"",welcome:"",coryright:"",beian:""}}},created(){this.fetch()},methods:{afterIconUpload(t){console.log(t),this.$set(this.model,"icon",t.url)},afterBannerUpload(t){console.log(t),this.$set(this.model,"banner",t.url)},async save(){console.log(this.model);await this.$http.post("rest/sites/webInfo",this.model);this.$message({type:"success",message:"保存成功"})},async fetch(){const t=await this.$http.get("rest/sites/webInfo");this.model=t.data}}},ee=te,se=(s("6136"),Object(o["a"])(ee,Xt,Zt,!1,null,null,null)),ae=se.exports;a["default"].use(u["a"]);const le=[{path:"/login",name:"login",component:$,meta:{isPublic:!0}},{path:"/",name:"main",component:v,children:[{path:"/categories/create",component:z},{path:"/categories/edit/:id",component:z,props:!0},{path:"/categories/list",component:H},{path:"/items/create",component:R},{path:"/items/edit/:id",component:R,props:!0},{path:"/items/list",component:J},{path:"/heroes/create",component:tt},{path:"/heroes/edit/:id",component:tt,props:!0},{path:"/heroes/list",component:ot},{path:"/articles/create",component:ft},{path:"/articles/edit/:id",component:ft,props:!0},{path:"/articles/list",component:xt},{path:"/fontsManage",component:Qt},{path:"/siteManage",component:ae},{path:"/ads/create",component:Ct},{path:"/ads/edit/:id",component:Ct,props:!0},{path:"/ads/list",component:It},{path:"/admin_users/create",component:Bt},{path:"/admin_users/edit/:id",component:Bt,props:!0},{path:"/admin_users/list",component:Wt}]}],ie=new u["a"]({routes:le});ie.beforeEach((t,e,s)=>{if(console.log(t),!t.meta.isPublic&&!localStorage.token)return s("/login");s()});var oe=ie,re=s("bc3a"),ne=s.n(re);let ce="production";console.log(ce);const de=ne.a.create({baseURL:"/admin/api"});de.interceptors.request.use(t=>(localStorage.token&&(t.headers.Authorization="Bearer "+(localStorage.token||"")),t),t=>Promise.reject(t)),de.interceptors.response.use(t=>t,t=>(t.response.data.message&&(a["default"].prototype.$message({type:"error",message:t.response.data.message}),console.log(t.response),401===t.response.status&&(a["default"].prototype.$message({type:"error",message:"未登录或token失效，请重新登录"}),localStorage.removeItem("token"),oe.push("/login"))),Promise.reject(t)));var me=de;a["default"].config.productionTip=!1,a["default"].prototype.$http=me,a["default"].mixin({computed:{uploadUrl(){return this.$http.defaults.baseURL+"/upload"}},methods:{getAuthHeaders(){return{Authorization:"Bearer "+(localStorage.token||"")}}}}),new a["default"]({router:oe,render:t=>t(c)}).$mount("#app")},6136:function(t,e,s){"use strict";s("4fde")},"665b":function(t,e,s){"use strict";s("0189")},6727:function(t,e,s){"use strict";s("bdd4")},"68a5":function(t,e,s){},"982c":function(t,e,s){},abb7:function(t,e,s){"use strict";s("ed26")},acc2:function(t,e,s){},bd52:function(t,e,s){},bdd4:function(t,e,s){},bfdf:function(t,e,s){},ed26:function(t,e,s){}});
//# sourceMappingURL=app.fd9d3457.js.map